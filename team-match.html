<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kendo Scoreboard - Team Match</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="main-container">
        <!-- Timer Section -->
        <header class="timer-header">
            <a href="index.html" class="back-link">‚Üê Back to Menu</a>
            <div id="timer-display" class="timer">05:00</div>
            <div class="timer-controls">
                <button id="btn-start-stop">Start</button>
                <button id="btn-end-match">End Match</button>
                <button id="btn-daihyosha">Daihyosha-sen</button>
                <button id="btn-reset">Reset Match</button>
                <button id="btn-reset-all">Reset All</button>
                <button id="btn-edit-time">Edit Time</button>
                <button id="btn-download">Download Results</button>
            </div>
        </header>

        <!-- Scoreboard Table -->
        <div class="scoreboard-table">
            <!-- Headers -->
            <div class="header-row">
                <div class="cell header-cell order-cell">Order</div>
                <div class="cell header-cell">White</div>
                <div class="cell header-cell result-header"></div>
                <div class="cell header-cell red-header">Red</div>
                <div class="cell header-cell order-cell">Order</div>
            </div>

            <!-- Team Names -->
            <div class="names-row">
                <div class="cell empty-cell"></div>
                <div class="cell name-cell">
                    <input type="text" value="WHITE TEAM" aria-label="White Team Name" class="team-input">
                </div>
                <div class="cell result-cell"></div>
                <div class="cell name-cell">
                    <input type="text" value="RED TEAM" aria-label="Red Team Name" class="team-input">
                </div>
                <div class="cell empty-cell"></div>
            </div>

            <!-- Rows Container -->
            <div id="rows-container"></div>

            <!-- Summary Row -->
            <div class="summary-row">
                <div class="cell empty-cell">Result</div>
                <div class="cell summary-cell" id="white-summary">Wins: 0 | Pts: 0</div>
                <div class="cell result-cell"></div>
                <div class="cell summary-cell" id="red-summary">Wins: 0 | Pts: 0</div>
                <div class="cell empty-cell"></div>
            </div>

            <!-- Daihyosha-sen Row (Representative Match) -->
            <div class="match-row daihyosha-row hidden" id="daihyosha-row" data-index="rep">
                <div class="cell order-cell">Daihyosha</div>
                <div class="cell name-cell">
                    <input type="text" value="White Representative" class="name-input"
                        aria-label="White Player Representative">
                </div>
                <div class="cell score-cell" id="white-score-rep">
                    <div class="ippon-container" id="white-ippon-rep"></div>
                    <div class="hansoku-container" id="white-hansoku-rep"></div>
                </div>
                <div class="cell result-cell" id="result-cell-rep"></div>
                <div class="cell score-cell" id="red-score-rep">
                    <div class="ippon-container" id="red-ippon-rep"></div>
                    <div class="hansoku-container" id="red-hansoku-rep"></div>
                </div>
                <div class="cell name-cell">
                    <input type="text" value="Red Representative" class="name-input"
                        aria-label="Red Player Representative">
                </div>
                <div class="cell order-cell">Daihyosha</div>
            </div>

            <!-- Winner Announcement -->
            <div class="winner-row" id="winner-row">
                <div class="winner-announcement" id="winner-announcement"></div>
            </div>
        </div>

        <!-- Controls -->
        <div class="controls-container">
            <div class="player-controls">
                <h3>White Controls</h3>
                <div class="btn-group">
                    <button class="btn-score" data-player="white" data-type="M">Men</button>
                    <button class="btn-score" data-player="white" data-type="K">Kote</button>
                    <button class="btn-score" data-player="white" data-type="D">Do</button>
                    <button class="btn-score" data-player="white" data-type="T">Tsuki</button>
                </div>
                <button class="btn-penalty" data-player="white">Hansoku</button>
                <button class="btn-fusen" data-player="white">Fusen-gachi</button>
                <button class="btn-undo" data-player="white" data-action="undo">Undo</button>
            </div>

            <div class="player-controls">
                <h3>Red Controls</h3>
                <div class="btn-group">
                    <button class="btn-score" data-player="red" data-type="M">Men</button>
                    <button class="btn-score" data-player="red" data-type="K">Kote</button>
                    <button class="btn-score" data-player="red" data-type="D">Do</button>
                    <button class="btn-score" data-player="red" data-type="T">Tsuki</button>
                </div>
                <button class="btn-penalty" data-player="red">Hansoku</button>
                <button class="btn-fusen" data-player="red">Fusen-gachi</button>
                <button class="btn-undo" data-player="red" data-action="undo">Undo</button>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="time-modal" class="modal hidden">
        <div class="modal-content">
            <h2>Set Time</h2>
            <input type="number" id="input-minutes" min="0" max="60" value="5"> :
            <input type="number" id="input-seconds" min="0" max="59" value="00">
            <div class="modal-actions">
                <button id="btn-save-time">Save</button>
                <button id="btn-cancel-time">Cancel</button>
            </div>
        </div>
    </div>

    <script src="kendo-team-scoreboard.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        window.scoreboard = new KendoScoreboard({
            positions: ['Senpo', 'Jiho', 'Chuken', 'Fukusho', 'Taisho'],
            matchTypeLabel: '5-Man Team',
            csvPrefix: 'kendo-match',
            storageKey: 'kendo-5man'
        });
    });
    </script>
</body>

</html>